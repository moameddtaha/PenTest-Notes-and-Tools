___

# SMBMap

## Overview

SMBMap allows users to enumerate samba share drives across an entire domain. List share drives, drive permissions, share contents, upload/download functionality, file name auto-download pattern matching, and even execute remote commands. This tool was designed with pen testing in mind, and is intended to simplify searching for potentially sensitive data across large networks.

## Features:

-   Pass-the-Hash Support
-   File upload/download/delete
-   Permission enumeration (writable share, meet Metasploit)
-   Remote Command Execution
-   Distrubted file content searching (beta!)
-   File name matching (with an auto downoad capability)

## Options

-   `-H`: Hostname or IP address of the target system.
-   `-u`: Username, if omitted null session assumed
-   `-p`: Password or NTLM hash.
-   **-r**: List contents of directory, default is to list root of all shares, `ex. -r 'C$\Documents and Settings\Administrator\Documents`
-   `-x`: Execute a command on a remote system.
-   **-L**: List all drives on the specified host, requires ADMIN rights.
-   **-d**: Domain name (default WORKGROUP).
-   **-L**: List shares on a target system.
-   `-P`: Port number to use for the connection.
-   `-x`: Execute a command ex. 'ipconfig /all'
-  `--upload`: Upload files to a directory share on the remote system.
-  `--download`: Download files from a remote share on a Windows system..

## Examples of usage

- Connect using username and password
	```ruby
	smbmap -H <host> -u <username> -p <password>
	```

- Connect using username "guest" and no password "anonymous"
	```ruby
	smbmap -H <host> -u guest -p "" -d <directory>
	```

- Connect to a specific domain name (default WORKGROUP)
	```ruby
	smbmap -H <host> -u <username> -p <password> -d <directory>
	```

-   List contents of directory, default is to list root of all shares.
	```ruby
	smbmap -H <host> -u <username> -p <password> -r 'C$\Users'
	```

- Running a command on a remote system:
	```ruby
	smbmap -H <host> -u <username> -p <password> -x "<command>"
	```

- List all drives on the specified host, **requires ADMIN**
```ruby
smbmap -H <host> -u <username> -p <password> -L
```

- Upload files to a directory share on the remote system.
```ruby
smbmap -H <host> -u <username> -p <password> --upload <local file> <remote share>
```

- Download files from a remote share on the remote system.
```ruby
smbmap -H <host> -u <username> -p <password> --download <remote file> <local file>
```



